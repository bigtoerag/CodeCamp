<!DOCTYPE html>
<html lang="en">
<head>
  <title>AFL Scoreboard</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
 <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <style>
html,body {

  height: 100%; width: 100%; margin: 0; font-family: 'Ubuntu', sans-serif;
}
.scores {
  font-size: 24px;
}
.totals {
  font-size: 24px;
  font-weight: 800;
}
.qtrs {
  font-size: 20px;
  font-weight: 800;
}
.border-3 {
    border-width:5px !important;
}
.bg-black {
  background-color: black;
}
  </style>
</head>
<body class="bg-secondary">

  <!--Navigation bar-->
  <div id="nav-placeholder">

  </div>

  <script>
  $(function(){
    $("#nav-placeholder").load("../../nav.html");
  });
  </script>

  <div class="container-fluid text-center mt-5 bg-secondary">
    <div class="text-white" id="final_score_div">
      <kbd class="scores w-100 text-center py-3" id="final_score_modal"></kbd>
     </div>
    <div class="d-flex text-white" id="header_div">
      <div class="col-3 totals" id="quarter_tag">1st Qtr</div>
      <input hidden id="quarter" value="1"></input>
      <div class="col-5 border border-light border-3 scores">AFL Scoreboard</div>
      <div class="col-1 scores"><span class="fa fa-play" onclick="countdown('ten-countdown', 0, 5 );" id="timer_start"></span></div>
      <div class="col-2 scores" id="ten-countdown">00:00</div>
      <div class="col-1 scores"><span class=""></span></div>
     </div>
  <br>
    <div class="d-flex bg-secondary text-white">
    <div class="col-2"></div>
    <div class="col-4"></div>
    <div class="col-2"><span class="fa fa-plus-square" style="font-size:32px;" onclick="scoring('ht_goals', 'a', 'ht');"></span></div>
    <div class="col-2"><span class="fa fa-plus-square" style="font-size:32px;" onclick="scoring('ht_behinds', 'a', 'ht');"></span></div>
    <div class="col-2"></div>
    </div>
    <div class="d-flex p-2 bg-secondary text-white" id="ht">
    <div class="col-2">Home</div>
    <div class="col-4">
      <select class="browser-default custom-select" id="HomeSelect" onchange="bg_color('HomeSelect')">
        <option selected>Home Team</option>
        <option value="1">Newtown</option>
        <option value="2">Maroubra</option>
        <option value="3">Glebe</option>
        <option value="4">East Subs</option>
        <option value="5">West Subs</option>
        <option value="5">Moore Park</option>
      </select>
    </div>
    <div class="col-2 border border-light scores" id="ht_goals">0</div>
    <div class="col-2 border border-light scores" id="ht_behinds">0</div>
    <div class="col-2 border border-light totals" id="ht_score">0</div>
    </div>
      <div class="d-flex bg-secondary text-white">
    <div class="col-2"></div>
    <div class="col-4"></div>
    <div class="col-2"><span class="fa fa-minus-square" style="font-size:32px;" onclick="scoring('ht_goals', 'm', 'ht');"></span></div>
    <div class="col-2"><span class="fa fa-minus-square" style="font-size:32px;" onclick="scoring('ht_behinds', 'm', 'ht');"></span></div>
    <div class="col-2"></div>
    </div>
    <br>
    <div class="d-flex bg-secondary text-white">
    <div class="col-2"></div>
    <div class="col-4"></div>
    <div class="col-2"><span class="fa fa-plus-square" style="font-size:32px;" onclick="scoring('aw_goals', 'a', 'aw');"></span></div>
    <div class="col-2"><span class="fa fa-plus-square" style="font-size:32px;" onclick="scoring('aw_behinds', 'a', 'aw');"></span></div>
    <div class="col-2"></div>
    </div>
    <div class="d-flex p-2 bg-secondary text-white" id="aw">
    <div class="col-2">Away</div>
    <div class="col-4">
      <select class="browser-default custom-select" id="AwaySelect" onchange="bg_color('AwaySelect')">
        <option selected>Away Team</option>
        <option value="1">Newtown</option>
        <option value="2">Maroubra</option>
        <option value="3">Glebe</option>
        <option value="4">East Subs</option>
        <option value="5">West Subs</option>
        <option value="5">Moore Park</option>
      </select>
    </div>
    <div class="col-2 border border-light scores" id="aw_goals">0</div>
    <div class="col-2 border border-light scores" id="aw_behinds">0</div>
    <div class="col-2 border border-light totals" id="aw_score">0</div>
    </div>
      <div class="d-flex bg-secondary text-white">
    <div class="col-2"></div>
    <div class="col-4"></div>
    <div class="col-2"><span class="fa fa-minus-square" style="font-size:32px;" onclick="scoring('aw_goals', 'm', 'aw');"></span></div>
    <div class="col-2"><span class="fa fa-minus-square" style="font-size:32px;" onclick="scoring('aw_behinds', 'm', 'aw');"></span></div>
    <div class="col-2"></div>
    </div>

  <br>
  <div class="d-flex text-white p-4">
  <div class="col-3 qtrs text-center"><kbd id="1" class="bg-secondary text-center">Qtr 1 score</kbd></div>
  <div class="col-3 qtrs"><kbd id="2" class="bg-secondary">Qtr 2 score</div>
  <div class="col-3 qtrs"><kbd id="3" class="bg-secondary">Qtr 3 score</div>
  <div class="col-3 qtrs"><kbd id="4" class="bg-secondary">Qtr 4 score</div>
  </div>
  </div>
  <footer class="container-fluid text-center text-white">
    <hr class="border border-light">
        <div id="footer" class="footer p-3 text-center">
          <p class="">Cobbled together by Marcus using COVID-19 skills in JS</p>
        </div>
  </footer>
</div>
  <script>
  window.onload=function() {
    document.getElementById("final_score_div").style.display = "none";
    document.getElementById("final_score_div").classList.remove("d-flex");
    document.getElementById("final_score_div").classList.add("d-none");
  }
  function countdown( elementName, minutes, seconds )
{
    var element, endTime, hours, mins, msLeft, time;
    function twoDigits( n )
    {
        return (n <= 9 ? "0" + n : n);
    }

    function updateTimer()
    {
        msLeft = endTime - (+new Date);
        if ( msLeft < 100 ) {
            element.innerHTML = "Ended"
            qtr = document.getElementById("quarter").value;
            which_qtr(qtr);
            document.getElementById("timer_start").onclick = function(){ countdown('ten-countdown', 0, 5 )};
          } else {
            time = new Date( msLeft );
            hours = time.getUTCHours();
            mins = time.getUTCMinutes();
            element.innerHTML = (hours ? hours + ':' + twoDigits( mins ) : mins) + ':' + twoDigits( time.getUTCSeconds() );
            setTimeout( updateTimer, time.getUTCMilliseconds() + 500 );
        }
    }

    element = document.getElementById( elementName );
    endTime = (+new Date) + 1000 * (60*minutes + seconds) + 500;
    document.getElementById("timer_start").onclick = "null";
    updateTimer();
}
function scoring(elementName, type, team) {
element = document.getElementById( elementName );
current_score = parseInt(element.innerHTML);
if (current_score == 0) {
  if (type == "a"){
    current_score++;
    element.innerHTML = current_score;
    total(team);
  } else {
  //do nothing
  }
} else if (current_score > 0) {
 if (type == "a"){
    current_score++;
    element.innerHTML = current_score;
    total(team);
  } else if (type == "m") {
    current_score--;
    element.innerHTML = current_score;
    total(team);
  } else {
  //do nothing
  }
}
}
function total(team) {
if (team == 'ht'){
//total_ht_now = document.getElementById('ht_score').innerHTML;
ht_goals = document.getElementById('ht_goals').innerHTML;
ht_behinds = document.getElementById('ht_behinds').innerHTML;
ht_score = (parseInt(ht_goals)*6) + parseInt(ht_behinds);
document.getElementById('ht_score').innerHTML = ht_score;
} else if (team == 'aw'){
//total_aw_now = document.getElementById('aw_score').innerHTML;
aw_goals = document.getElementById('aw_goals').innerHTML;
aw_behinds = document.getElementById('aw_behinds').innerHTML;
aw_score = (parseInt(aw_goals)*6) + parseInt(aw_behinds);
document.getElementById('aw_score').innerHTML = aw_score;
} else {
//do nothing
}
}
function bg_color(team) {
 var x = document.getElementById(team).value;
 if (team == 'HomeSelect'){
   y = 'ht';
 } else if (team == 'AwaySelect') {
   y = 'aw';
 } else {
   alert("No team detected in selection update")
 }
 if (x == 1){
   document.getElementById(y).classList.remove("bg-secondary");
   document.getElementById(y).classList.add("bg-danger");
   document.getElementById(y).disabled = true;
 } else {
   document.getElementById(y).classList.remove("bg-secondary");
   document.getElementById(y).classList.add("bg-primary");
   document.getElementById(y).disabled = true;
 }

}
function which_qtr(qtr) {
  //document.getElementById('ht_goals').innerHTML = "0";
  //document.getElementById('ht_behinds').innerHTML = "0";
  //document.getElementById('aw_goals').innerHTML = "0";
  //document.getElementById('aw_behinds').innerHTML = "0";
  if (qtr == 1) {
    document.getElementById('quarter_tag').innerHTML = "2nd Qtr";
    qtr_score(qtr);
    document.getElementById("quarter").value = "2";
  } else if (qtr == 2) {
    document.getElementById('quarter_tag').innerHTML = "3rd Qtr";
    qtr_score(qtr);
    document.getElementById("quarter").value = "3";
  } else if (qtr == 3) {
    document.getElementById('quarter_tag').innerHTML = "4th Qtr";
    qtr_score(qtr);
    document.getElementById("quarter").value = "4";
  } else {
    document.getElementById('quarter_tag').innerHTML = "Game Over";
    qtr_score(qtr);
    final_score();
  }
}
function qtr_score(qtr){
  var h = document.getElementById("HomeSelect");
  var home_team = h.options[h.selectedIndex].text;
  var a = document.getElementById("AwaySelect");
  var away_team = a.options[a.selectedIndex].text;
  ht_goals = document.getElementById('ht_goals').innerHTML;
  ht_behinds = document.getElementById('ht_behinds').innerHTML;
  ht_score = document.getElementById('ht_score').innerHTML;
  aw_goals = document.getElementById('aw_goals').innerHTML;
  aw_behinds = document.getElementById('aw_behinds').innerHTML;
  aw_score = document.getElementById('aw_score').innerHTML;
  end_qtr_score = home_team + ": " + parseInt(ht_goals) + "." + parseInt(ht_behinds) + "(" + parseInt(ht_score) + ")<br>" + away_team + ": " + parseInt(aw_goals) + "." + parseInt(aw_behinds) + "(" + parseInt(aw_score) + ")";
  document.getElementById(qtr).innerHTML = end_qtr_score;
}
function final_score() {
  var h = document.getElementById("HomeSelect");
  var home_team = h.options[h.selectedIndex].text;
  var a = document.getElementById("AwaySelect");
  var away_team = a.options[a.selectedIndex].text;
  ht_final_goals = document.getElementById('ht_goals').innerHTML;
  ht_final_behinds = document.getElementById('ht_behinds').innerHTML;
  ht_final_score = document.getElementById('ht_score').innerHTML;
  aw_final_goals = document.getElementById('aw_goals').innerHTML;
  aw_final_behinds = document.getElementById('aw_behinds').innerHTML;
  aw_final_score = document.getElementById('aw_score').innerHTML;
  document.getElementById("final_score_div").classList.add("d-flex");
  document.getElementById("final_score_div").classList.remove("d-none");
  document.getElementById("header_div").classList.remove("d-flex");
  document.getElementById("header_div").classList.add("d-none");
  if (ht_final_score > aw_final_score) {
    document.getElementById("final_score_modal").innerHTML = home_team + " " + ht_final_goals + "." + ht_final_behinds + " (" + ht_final_score + ")<br>def<br>" + away_team + " " + aw_final_goals + "." + aw_final_behinds + " (" + aw_final_score + ")";
  } else if (ht_final_score < aw_final_score) {
    document.getElementById("final_score_modal").innerHTML = away_team + " " + aw_final_goals + "." + aw_final_behinds + " (" + aw_final_score + ") def " + home_team + " " + ht_final_goals + "." + ht_final_behinds + " (" + ht_final_score + ")";
  } else {
    document.getElementById("final_score_modal").innerHTML = home_team + " " + ht_final_goals + "." + ht_final_behinds + " (" + ht_final_score + ") draw " + away_team + " " + aw_final_goals + "." + aw_final_behinds + " (" + aw_final_score + ")";
  }

}
  </script>

</body>
</html>
